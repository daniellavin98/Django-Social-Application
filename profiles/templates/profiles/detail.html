{% extends "base.html" %}
{% load thumbnail %}

{% block title %}{{ user.username}}{% endblock title %}

{% block body %}
    <!-- component https://tailwindcomponents.com/component/profile-card-horizon-ui-tailwind  --> 
<html>
    <head>
        <link rel="stylesheet" href="https://horizon-tailwind-react-git-tailwind-components-horizon-ui.vercel.app/static/css/main.ad49aa9b.css" />
    </head>
    <body >
        <div class="flex flex-col justify-center items-center h-[100vh]">
            <div class="relative flex flex-col items-center rounded-[20px] w-[400px] mx-auto p-4 bg-white bg-clip-border shadow-3xl shadow-shadow-500 dark:!bg-navy-800 dark:text-white dark:!shadow-none">
                <div class="relative flex h-full w-full justify-center rounded-xl bg-cover" >
                    {% thumbnail user.profile.image "300x300" crop="center" as im %}
                    <img class="rounded-full" src="{{ im.url }}" alt="" />
                    {% endthumbnail %}
                </div> 
                <div class="mt-16 flex flex-col items-center">
                    <h4 class="text-xl font-bold text-navy-700 dark:text-white">
                    {{ user.username}}
                    </h4>   
                </div> 
                {% if request.user.is_authenticated %}
                    {% if request.user != user%}
                        <div class="mt-3">
                    
                            <button class="bg-white text-gray-800 font-bold rounded border-b-2 border-green-500 hover:border-green-600 hover:bg-green-500 
                            hover:text-white shadow-md py-1 px-3 inline-flex items-center js-follow" data-username="{{ user.username }}" 
                            data-action="{% if you_follow %}un{% endif %}follow" data-url="{% url 'profiles:follow' user.username %}"type="button">
                                <span class="mr-2 js-follow-text">
                                    {% if you_follow %}
                                        Unfollow
                                    {% else %}
                                        Follow
                                    {% endif %}
                                </span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="currentcolor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                                </svg>
                            </button>
                            
                        </div>
                    {% endif %}
                {% else %}
                    <div class="mt-3 text-sm">Login to follow this user</div>
                {% endif %}
                <div class="mt-6 mb-3 flex gap-14 md:!gap-14">
                    <div class="flex flex-col items-center justify-center">
                    <p class="text-2xl font-bold text-navy-700 dark:text-white">{{ total_posts }}</p>
                    <p class="text-sm font-normal text-gray-600">Posts</p>
                    </div>
                    <div class="flex flex-col items-center justify-center">
                    <p class="text-2xl font-bold text-navy-700 dark:text-white">
                        {{ total_followers }}
                    </p>
                    <p class="text-sm font-normal text-gray-600">Followers</p>
                    </div>
                    <div class="flex flex-col items-center justify-center">
                    <p class="text-2xl font-bold text-navy-700 dark:text-white">
                        {{ total_following }}
                    </p>
                    <p class="text-sm font-normal text-gray-600">Following</p>
                    </div>
                </div>
            </div>  
            <p class="font-normal text-navy-700 mt-20 mx-auto w-max">Profile Card component from <a href="https://horizon-ui.com?ref=tailwindcomponents.com" target="_blank" class="text-brand-500 font-bold">Horizon UI Tailwind React</a></p>  
        </div>
    </body>
</html>
{% endblock body %}